#import "./client.gql"
#import "./token-req.gql"

fragment tokenBase on Token{
    id
    key
    date
}

fragment token on Token{
    ...tokenBase
    ...tokenGeneralBase
}

fragment tokenMaster on TokenMaster{
    ...tokenBase
}

fragment tokenGeneralBase on TokenGeneral{
    client{
        ...client
    }
}

fragment tokenGeneral on TokenGeneral{
    ...tokenBase
    ...tokenGeneralBase
}

query findToken{
    token{
        ... on TokenMaster{
            id
            key
        }
    }
}

query findTokens{
    tokens{
        ... on TokenMaster{
            ...tokenMaster
        }
        ... on TokenGeneral{
            ...tokenGeneral
        }
    }
}

mutation createTokenMaster($auth:AuthUser!){
    createTokenMaster(auth:$auth){
        ...token
    }
}

mutation delTokenClient($client:ID!){
    delTokenClient(client:$client)
}

mutation createTokenGeneral($client:ID!){
    createTokenGeneral(client:$client){
        token{
            ...tokenGeneral
        }
        req{
            ...tokenReq
        }
    }
}